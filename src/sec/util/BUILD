cc_library(
    name = "util",
    alwayslink = 1,
    linkstatic = True,
    copts = ["-Isrc",
             "-Iconfig/darwin",
             "-Iconfig/darwin/coap",
             "-Iexternal/libcoap/include",
             "-Iexternal/libcoap/include/coap",
    ] + select({"//config:darwin": ["-U DEBUG"],
                "//config:mingw": [],
                "//config:msvc": [],
                "//config:msys": [],
                "//conditions:default": ["-std=c11"]}),
    deps = ["//src:config",
            "//src/logger",
            "//src/portability",
            "@libcoap//:libcoap"],
    srcs = glob(["srmutility.c",
                 "srmutility.h"]),
    visibility = ["//src/sec/svrs:__pkg__",
                  "//src/sec/dox:__pkg__",
                  "//src/ocf:__pkg__",
                  "//src/provisioning:__pkg__"]
)
