cc_library(
    name = "util",
    copts = ["-Isrc",
             "-Iexternal/openocf/src/",
             "-Isrc/comm",
             "-Iexternal/openocf/src/comm",
             "-Isrc/comm/transport/util",
             "-Iexternal/openocf/src/comm/transport/util",
             "-Isrc/comm/util",
             "-Iexternal/openocf/src/comm/util",
    	     "-Isrc/portability",
             "-Iexternal/openocf/src/portability",
	     "-Isrc/util",
             "-Iexternal/openocf/src/util",
             "-Iexternal/libcoap/include",
             "-Iexternal/openocf/third_party/coap/include"]
    + select({"//config:mingw": [],
              "//config:msvc": [],
              "//config:msys": [],
              "//conditions:default": ["-std=c11",
                                       "-U DEBUG"]}), # OS X
    deps = ["//src:config",
            "//src/comm/transport/util",
            "//src/logger",
    	    "//src/portability",
            "//src/util",
            "@libcoap//:libcoap"],
    srcs = glob(["*.c"]) + glob(["*.h"]),
    visibility = ["//src/comm:__subpackages__"]
)
