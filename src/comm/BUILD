
cc_library(
    name = "cacommon",
    copts = ["-std=c11", "-Isrc/comm/util"],
    srcs  = ["common/cacommon.h"])

# code shared by adapters
cc_library(
    name = "shared",
    copts = ["-std=c11",
             "-Isrc",
             "-Isrc/comm/common",
             "-Isrc/comm/util",
             "-Isrc/portability",
             "-Isrc/util"],
    deps  = ["//src:config",
             "//src/portability",
    	     "//src/comm:util",
    	     "//src/comm:cacommon"],
    srcs  = ["common/caadapterinterface.h",
             "common/caadapterutils.h",
             "common/cacommonutil.h",
             "common/cainterface.h",
             "common/camutex.h",
	     "common/caqueueingthread.c",
	     "common/caqueueingthread.h",
             "common/cathreadpool.h"],
    visibility = ["//src/comm/network:__pkg__"]
)

cc_library(
    name = "comm",
    copts = ["-std=c11",
    	     "-Isrc",
             "-Isrc/comm", "-Isrc/comm/api",
	     "-Isrc/comm/common",
	     "-Isrc/comm/include", "-Isrc/comm/util",
             "-Isrc/comm/network",
             "-Isrc/portability",
             "-Isrc/protocol/coap",
             "-Isrc/util"],
    deps = ["//src:config",
    	    "//src/portability",
	    "//src/comm:shared",
            "//src/comm:util",
            "//src/comm/network:ip",
            "//src/protocol/coap"],
    #hdrs = ["src/api/cacommon.h"],
    srcs = ["caconnectivitymanager.c",
            #"caedradapter.h",
            #"caleadapter.h",
            #"caleinterface.h",
            #"canfcadapter.h",
            #"canfcinterface.h",
            "include/casecurityinterface.h",
            "caremotehandler.c",
            "caremotehandler.h",
	    "cainterfacecontroller.c",
	    "cainterfacecontroller.h",
	    "camessagehandler.c",
	    "camessagehandler.h",
	    "canetworkconfigurator.c",
            "canetworkconfigurator.h",
	    "caprotocolmessage.c",
	    "caprotocolmessage.h",
	    "caretransmission.c",
	    "caretransmission.h"],
    visibility = ["//src/comm/network:__pkg__"]
)

cc_library(
    name = "util",
    copts = ["-std=c11",
    	     "-Isrc",
    	     "-Isrc/portability", "-Iutil",
             "-Isrc/comm", "-Isrc/comm/api", "-Isrc/comm/util", "-Isrc/comm/common",
             "-Isrc/protocol/coap",
	     "-Isrc/util"],
    deps = ["//src:config",
    	    "//src/comm:cacommon",
    	    "//src/portability", "//src/protocol/coap", "//src/util"],
    srcs = [# "api/cacommon.h",
            # "caadapterutils.h",
            "util/uarraylist.c",
            "util/uarraylist.h",
            "util/ulinklist.c",
            "util/ulinklist.h",
            "util/uqueue.c",
            "util/uqueue.h"],
    visibility = ["//src/comm:__subpackages__"]
)
