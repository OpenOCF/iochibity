cc_library(
    name = "libcoap-lib",
    copts = ["-Iexternal/libcoap/dthaler-libcoap-a061013/include/coap"],
    #deps = ["autogen"],
    # linkstatic = 1,
    srcs = ["dthaler-libcoap-a061013/src/address.c",
            "dthaler-libcoap-a061013/src/async.c",
            "dthaler-libcoap-a061013/src/block.c",
            "dthaler-libcoap-a061013/src/coap_io.c",
            "dthaler-libcoap-a061013/src/coap_io_lwip.c",
            "dthaler-libcoap-a061013/src/coap_list.c",
            "dthaler-libcoap-a061013/src/coap_time.c",
            "dthaler-libcoap-a061013/src/debug.c",
            "dthaler-libcoap-a061013/src/encode.c",
            "dthaler-libcoap-a061013/src/hashkey.c",
            "dthaler-libcoap-a061013/src/mem.c",
            "dthaler-libcoap-a061013/src/net.c",
            "dthaler-libcoap-a061013/src/option.c",
            "dthaler-libcoap-a061013/src/pdu.c",
            "dthaler-libcoap-a061013/src/resource.c",
            "dthaler-libcoap-a061013/src/str.c",
            "dthaler-libcoap-a061013/src/subscribe.c",
            "dthaler-libcoap-a061013/src/uri.c",
            "dthaler-libcoap-a061013/include/coap/address.h",
            "dthaler-libcoap-a061013/include/coap/async.h",
            "dthaler-libcoap-a061013/include/coap/bits.h",
            "dthaler-libcoap-a061013/include/coap/block.h",
            #"dthaler-libcoap-a061013/include/coap/coap.h.in",
            #"dthaler-libcoap-a061013/include/coap/coap.h",
            "dthaler-libcoap-a061013/include/coap/coap_io.h",
            "dthaler-libcoap-a061013/include/coap/coap_list.h",
            "dthaler-libcoap-a061013/include/coap/coap_time.h",
            "dthaler-libcoap-a061013/include/coap/debug.h",
            "dthaler-libcoap-a061013/include/coap/encode.h",
            "dthaler-libcoap-a061013/include/coap/hashkey.h",
            "dthaler-libcoap-a061013/include/coap/libcoap.h",
            "dthaler-libcoap-a061013/include/coap/lwippools.h",
            "dthaler-libcoap-a061013/include/coap/mem.h",
            "dthaler-libcoap-a061013/include/coap/net.h",
            "dthaler-libcoap-a061013/include/coap/option.h",
            "dthaler-libcoap-a061013/include/coap/pdu.h",
            "dthaler-libcoap-a061013/include/coap/prng.h",
            "dthaler-libcoap-a061013/include/coap/resource.h",
            "dthaler-libcoap-a061013/include/coap/str.h",
            "dthaler-libcoap-a061013/include/coap/subscribe.h",
            "dthaler-libcoap-a061013/include/coap/uri.h",
            "dthaler-libcoap-a061013/include/coap/uthash.h",
            "dthaler-libcoap-a061013/include/coap/utlist.h"],
    visibility = ["//visibility:public"]
)

genrule(
    name = "autogen",
    # srcs = "",
    outs = ["INSTALL", "Makefile.in", "aclocal.m4", "ar-lib",
            "autom4te.cache", "coap_config.h.in", "compile",
            "config.guess", "config.sub", "configure",
            "depcomp", "install-sh", "ltmain.sh", "missing"],
    cmd = "autogen.sh",
    visibility = ["//visibility:public"]
)
